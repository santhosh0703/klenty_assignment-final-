(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){e.exports=a(195)},105:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=(a(105),a(8)),u=a.n(o),i=a(7),s=Object(n.createContext)({user:null,setUser:function(){},handleLogout:function(){}}),m=a(21),d=a(28),p=a(11),f=a.n(p),h=a(84),b=a(227),g=a(229),E=a(49),v=a(232),O=a(88),j=a(230),y=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function x(){var e=Object(d.g)(),t=Object(n.useContext)(s),a=t.user,c=t.handleLogout,l=y(),o=r.a.useState(null),u=Object(i.a)(o,2),m=u[0],p=u[1],f=Boolean(m),h=function(e){p(e.currentTarget)},x=function(){p(null)};return r.a.createElement("div",{className:l.root},r.a.createElement(b.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement(E.a,{variant:"h6",className:l.title},"klenty discussions"),r.a.createElement(j.a,{color:"inherit",onClick:function(){return e.push("/category")}},"discussion list"),a?r.a.createElement("div",null,r.a.createElement(j.a,{onClick:h,color:"inherit"},a.name),r.a.createElement(O.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:x},r.a.createElement(v.a,{onClick:function(){x(),c()}},"Logout"))):r.a.createElement("div",null,r.a.createElement(j.a,{onClick:h,color:"inherit"},"Account"),r.a.createElement(O.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:x},r.a.createElement(v.a,{onClick:function(){x(),e.push("/auth/login")}},"Login"),r.a.createElement(v.a,{onClick:function(){x(),e.push("/auth/register")}},"Register"))))))}function w(){return r.a.createElement("div",null,r.a.createElement("h1",null,"welcome!!!!!!!!...click on category button to see all the disussion categories"))}var C=a(238),S=a(234),k=a(237),W=a(48),T=a.n(W),I=a(233),_=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function N(){var e=Object(d.g)(),t=Object(n.useContext)(s).setUser,a=_(),c=Object(n.useState)(""),l=Object(i.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(null),h=Object(i.a)(p,2),b=h[0],g=h[1],v=Object(n.useState)(""),O=Object(i.a)(v,2),y=O[0],x=O[1],w=Object(n.useState)(null),W=Object(i.a)(w,2),N=W[0],q=W[1];return r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(S.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(C.a,{className:a.avatar},r.a.createElement(T.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,onSubmit:function(a){var n,r,c,l,i,s;return u.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return a.preventDefault(),g(null),q(null),n={email:o,password:y},m.prev=4,m.next=7,u.a.awrap(f.a.post("/api/auth/login",n));case 7:r=m.sent,c=r.data,l=c.token,i=c.user,localStorage.setItem("token",l),t(i),e.push("/"),m.next=18;break;case 14:m.prev=14,m.t0=m.catch(4),"user_not_found"===(s=m.t0.response.data.message)?g("No users with this email were found"):"wrong_password"===s&&q("Wrong password");case 18:case"end":return m.stop()}}),null,null,[[4,14]])}},r.a.createElement(k.a,{required:!0,fullWidth:!0,label:"Email Address",autoFocus:!0,value:o,onChange:function(e){return m(e.target.value)},error:!!b,helperText:b}),r.a.createElement(k.a,{required:!0,fullWidth:!0,label:"Password",type:"password",value:y,onChange:function(e){return x(e.target.value)},error:!!N,helperText:N}),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"))))}var q=a(87),B=a.n(q),D=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function A(){var e=D(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)(null),h=Object(i.a)(p,2),b=h[0],g=h[1],v=Object(n.useState)(""),O=Object(i.a)(v,2),y=O[0],x=O[1],w=Object(n.useState)(null),W=Object(i.a)(w,2),_=W[0],N=W[1],q=Object(n.useState)(""),A=Object(i.a)(q,2),L=A[0],P=A[1];return r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(S.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(C.a,{className:e.avatar},r.a.createElement(T.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement("form",{className:e.form,onSubmit:function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),g(null),N(null),t=0,B.a.isEmail(m)||(g("Email must be in correct format"),t++),y!==L&&(N("Passwords don't match."),t++),!t){n.next=8;break}return n.abrupt("return");case 8:return a={name:c,email:m,password:y},n.prev=9,n.next=12,u.a.awrap(f.a.post("/api/auth/register",a));case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(9),"email_exists"===n.t0.response.data.message&&g("User with this email already exists");case 18:case"end":return n.stop()}}),null,null,[[9,14]])}},r.a.createElement(k.a,{required:!0,fullWidth:!0,label:"Name",autoFocus:!0,value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement(k.a,{required:!0,fullWidth:!0,label:"Email Address",value:m,onChange:function(e){return d(e.target.value)},error:!!b,helperText:b}),r.a.createElement(k.a,{required:!0,fullWidth:!0,label:"Password",type:"password",value:y,onChange:function(e){return x(e.target.value)},error:!!_,helperText:_}),r.a.createElement(k.a,{required:!0,fullWidth:!0,label:"Password Confirmation",type:"password",value:L,onChange:function(e){return P(e.target.value)}}),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"))))}var L=function(){var e=Object(d.g)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useContext)(s).user;return r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("h1",{style:{marginBottom:"2rem"}},"Create Category"),r.a.createElement("form",{onSubmit:function(t){var a,n,r;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t.preventDefault(),a={title:c},l.next=4,u.a.awrap(f.a.post("/api/category/create",a));case 4:n=l.sent,r=n.data._id,e.push("/category/"+r);case 7:case"end":return l.stop()}}))}},r.a.createElement(k.a,{label:"Title",required:!0,fullWidth:!0,margin:"normal",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement(j.a,{type:"submit",disabled:!o,variant:"contained",color:"primary"},"Create")))},P=a(231),R=a(236),z=a(197),F=a(235);function U(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(s).user;Object(n.useEffect)((function(){o()}),[]);var o=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(f.a.get("/api/category"));case 2:e=t.sent,c(e.data);case 4:case"end":return t.stop()}}))},m=Object(d.g)();return r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("h1",null,"Browse Categories"),r.a.createElement(j.a,{variant:"contained",disabled:!l,color:"primary",onClick:function(){return m.push("/category/create")}},"Create discussion(Category)"),r.a.createElement(F.a,{style:{margin:"2rem 0"}}),r.a.createElement(P.a,null,a.map((function(e,t){return r.a.createElement(z.a,{key:t,button:!0,onClick:function(){return m.push("/category/".concat(e._id))}},r.a.createElement(R.a,{primary:e.title,secondary:e.createdAt}))}))))}function G(){var e=Object(d.g)(),t=Object(d.h)().id,a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],g=Object(n.useContext)(s).user;Object(n.useEffect)((function(){E(),v()}),[]);var E=function(){var e;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(f.a.get("/api/category/"+t));case 2:e=a.sent,o(e.data);case 4:case"end":return a.stop()}}))},v=function(){var e;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(f.a.get("/api/forum/category/"+t));case 2:e=a.sent,b(e.data);case 4:case"end":return a.stop()}}))};return r.a.createElement("div",{style:{padding:"2rem"}},l&&r.a.createElement("h1",null,l.title),r.a.createElement(j.a,{variant:"contained",disabled:!g,color:"primary",onClick:function(){return e.push("/forum/create/"+t)}},"Create Forum"),r.a.createElement(P.a,null,h.map((function(t,a){return r.a.createElement(z.a,{button:!0,onClick:function(){return e.push("/forum/".concat(t._id))}},r.a.createElement(R.a,{primary:t.title,secondary:t.createdAt}))}))))}var J=function(){var e=Object(d.h)().id,t=Object(d.g)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useContext)(s).user;return r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("h1",{style:{marginBottom:"2rem"}},"Create Forum"),r.a.createElement("form",{onSubmit:function(a){var n,r,c;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a.preventDefault(),n={title:l,categoryId:e},o.next=4,u.a.awrap(f.a.post("/api/forum/create",n));case 4:r=o.sent,c=r.data._id,t.push("/forum/"+c);case 7:case"end":return o.stop()}}))}},r.a.createElement(k.a,{label:"Title",required:!0,fullWidth:!0,margin:"normal",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement(j.a,{type:"submit",disabled:!m,variant:"contained",color:"primary"},"Create title for your discussion")))};function M(){var e=Object(d.g)(),t=Object(d.h)().id,a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],g=Object(n.useContext)(s).user;Object(n.useEffect)((function(){E(),v()}),[]);var E=function(){var e;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(f.a.get("/api/forum/"+t));case 2:e=a.sent,o(e.data);case 4:case"end":return a.stop()}}))},v=function(){var e;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(f.a.get("/api/thread/forum/"+t));case 2:e=a.sent,b(e.data);case 4:case"end":return a.stop()}}))};return r.a.createElement("div",{style:{padding:"2rem"}},l&&r.a.createElement("h1",null,l.title),r.a.createElement(j.a,{variant:"contained",disabled:!g,color:"primary",onClick:function(){return e.push("/thread/create/"+t)}},"Create Thread"),r.a.createElement(P.a,null,h.map((function(t,a){return r.a.createElement(z.a,{key:a,button:!0,onClick:function(){return e.push("/thread/".concat(t._id))}},r.a.createElement(R.a,{primary:t.title,secondary:t.createdAt}))}))))}var $=function(){var e=Object(n.useContext)(s).user,t=Object(d.h)().id,a=Object(d.g)(),c=Object(n.useState)(""),l=Object(i.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),b=h[0],g=h[1];return r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("h1",{style:{marginBottom:"2rem"}},"start your discussion Thread"),r.a.createElement("form",{onSubmit:function(n){var r,c,l;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n.preventDefault(),r={title:o,content:b,userId:e._id,forumId:t},i.next=4,u.a.awrap(f.a.post("/api/thread/create",r));case 4:c=i.sent,l=c.data._id,a.push("/thread/"+l);case 7:case"end":return i.stop()}}))}},r.a.createElement(k.a,{label:"Title",required:!0,fullWidth:!0,margin:"normal",value:o,onChange:function(e){return m(e.target.value)}}),r.a.createElement("textarea",{placeholder:"Content",required:!0,value:b,style:{width:"100%",height:250},onChange:function(e){return g(e.target.value)}}),r.a.createElement(j.a,{type:"submit",variant:"contained",color:"primary"},"Create")))},H=a(22);function K(){var e=Object(n.useContext)(s).user,t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),m=Object(i.a)(o,2),p=m[0],h=m[1],b=Object(n.useState)(1),g=Object(i.a)(b,2),E=g[0],v=g[1],O=Object(n.useState)(!1),y=Object(i.a)(O,2),x=y[0],w=y[1],C=Object(n.useState)(!1),S=Object(i.a)(C,2),W=S[0],T=S[1],I=Object(n.useState)(""),_=Object(i.a)(I,2),N=_[0],q=_[1],B=Object(d.h)().id;Object(n.useEffect)((function(){D(),A()}),[]);var D=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(f.a.get("/api/thread/"+B));case 2:e=t.sent,l(e.data);case 4:case"end":return t.stop()}}))},A=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(f.a.get("/api/post/thread/"+B,{params:{page:E}}));case 2:(e=t.sent).data.length?(h(e.data),v(E+1),w(!0)):w(!1);case 4:case"end":return t.stop()}}))};Object(d.g)();return r.a.createElement("div",{style:{padding:"2rem"}},c&&r.a.createElement("h1",null,c.title),c&&r.a.createElement("p",null,c.content),r.a.createElement(P.a,null,p.map((function(e,t){return r.a.createElement(z.a,{key:t},r.a.createElement(R.a,{primary:e.content,secondary:e.createdAt}))}))),r.a.createElement(j.a,{variant:"contained",color:"primary",disabled:!x,style:{marginRight:"1rem"},onClick:A},"Load More Posts"),r.a.createElement(j.a,{variant:"contained",disabled:!e,color:"primary",onClick:function(){return T(!0)}},"Reply"),W&&r.a.createElement("form",{onSubmit:function(t){var a,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),N){r.next=3;break}return r.abrupt("return");case 3:return a={userId:e._id,threadId:c._id,content:N},r.next=6,u.a.awrap(f.a.post("/api/post/create",a));case 6:n=r.sent,h([].concat(Object(H.a)(p),[n.data]));case 8:case"end":return r.stop()}}))}},r.a.createElement(k.a,{fullWidth:!0,label:"Content",value:N,onChange:function(e){return q(e.target.value)}}),r.a.createElement(j.a,{type:"submit"},"Reply")))}var Q=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),p=o[0],h=o[1];Object(n.useEffect)((function(){b()}),[]);var b=function(){var e,t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=localStorage.getItem("token"),n.next=3,u.a.awrap(f.a.get("/api/auth/init",{params:{token:e}}));case 3:t=n.sent,a=t.data.user,c(a),h(!0);case 7:case"end":return n.stop()}}))};return r.a.createElement("div",null,p&&r.a.createElement(s.Provider,{value:{user:a,setUser:c,handleLogout:function(){c(null),localStorage.setItem("token",null)}}},r.a.createElement(m.a,null,r.a.createElement(x,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(w,null)),r.a.createElement(d.b,{path:"/auth/login"},a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(N,null)),r.a.createElement(d.b,{path:"/auth/register"},a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(A,null)),r.a.createElement(d.b,{path:"/category/create"},a?r.a.createElement(L,null):r.a.createElement(d.a,{to:"/auth/login"})),r.a.createElement(d.b,{path:"/category/:id"},r.a.createElement(G,null)),r.a.createElement(d.b,{path:"/category"},r.a.createElement(U,null)),r.a.createElement(d.b,{path:"/forum/create/:id"},a?r.a.createElement(J,null):r.a.createElement(d.a,{to:"/auth/login"})),r.a.createElement(d.b,{path:"/forum/:id"},r.a.createElement(M,null)),r.a.createElement(d.b,{path:"/thread/create/:id"},a?r.a.createElement($,null):r.a.createElement(d.a,{to:"/auth/login"})),r.a.createElement(d.b,{path:"/thread/:id"},r.a.createElement(K,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[100,1,2]]]);
//# sourceMappingURL=main.b5c3bc9d.chunk.js.map